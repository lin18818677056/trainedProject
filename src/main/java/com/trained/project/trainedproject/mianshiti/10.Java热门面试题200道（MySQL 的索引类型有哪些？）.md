MySQL 的索引类型有哪些？

# Java热门面试题200道

## 10. MySQL 的索引类型有哪些？

在MySQL中，索引是提高数据库查询性能的重要工具。根据不同的分类标准，索引可以分为多种类型。

### 按照数据结构分类

1. **B+Tree索引**
    - 最常用的索引类型，默认的索引结构
    - 适用于全键值、键值范围或键值前缀查找
    - 在InnoDB存储引擎中，主键索引为聚簇索引，其他索引为二级索引

2. **Hash索引**
    - 基于哈希表实现，只适用于等值查询（=, IN, <=>）
    - 查找时间复杂度为O(1)，速度非常快
    - Memory存储引擎显式支持，InnoDB的自适应哈希索引为内部实现

3. **Full-text索引**
    - 用于全文搜索
    - 支持在VARCHAR、TEXT类型的列上创建
    - 可以通过MATCH AGAINST语法进行高效文本搜索

4. **R-Tree索引**
    - 用于空间数据类型
    - MyISAM存储引擎支持
    - 适用于地理信息系统(GIS)相关的数据

### 按照物理存储分类

1. **聚簇索引（Clustered Index）**
    - 数据行按索引的顺序存储
    - 一张表只能有一个聚簇索引
    - InnoDB中，主键就是聚簇索引；没有主键时，选择唯一非空索引；都没有时，自动生成隐藏聚簇索引

2. **二级索引（Secondary Index）**
    - 也叫辅助索引或非聚簇索引
    - 叶节点不包含行的全部数据，而是包含行的主键值
    - 查询时需要先通过二级索引找到主键，再通过主键在聚簇索引中找到完整行数据（回表）

### 按照字段特性分类

1. **主键索引（Primary Key）**
    - 特殊的唯一索引，不允许为空
    - 一张表只能有一个主键索引
    - InnoDB中自动成为聚簇索引

2. **唯一索引（Unique Key）**
    - 索引列的值必须唯一，允许为空
    - 可以有多个唯一索引

3. **普通索引（Normal Index）**
    - 最基本的索引类型，没有任何限制

4. **组合索引（Composite Index）**
    - 多个字段组成的索引
    - 遵循最左前缀匹配原则

### 按照功能分类

1. **前缀索引**
    - 对字符串列的前缀创建索引
    - 节省存储空间，但可能降低选择性

2. **覆盖索引**
    - 查询的数据都可以从索引中获取，无需回表
    - 性能很高，减少了I/O操作

### 创建各种索引的示例
``` 
sql 
-- 主键索引 ALTER TABLE table_name ADD PRIMARY KEY (column_name);
-- 唯一索引 CREATE UNIQUE INDEX idx_name ON table_name (column_name);
-- 普通索引 CREATE INDEX idx_name ON table_name (column_name);
-- 组合索引 CREATE INDEX idx_name ON table_name (col1, col2, col3);
-- 前缀索引 CREATE INDEX idx_name ON table_name (column_name(prefix_length));
-- 全文索引 CREATE FULLTEXT INDEX idx_name ON table_name (column_name);

``` 
### 索引的选择建议

1. 优先考虑在WHERE、ORDER BY、GROUP BY子句中经常出现的列建立索引
2. 组合索引要注意列的顺序，将选择性强的列放在前面
3. 避免在索引列上进行函数操作或计算
4. 合理利用覆盖索引来提升查询性能
5. 定期检查和优化索引，删除不必要的索引

正确理解和使用不同类型的索引对于数据库性能优化至关重要。
