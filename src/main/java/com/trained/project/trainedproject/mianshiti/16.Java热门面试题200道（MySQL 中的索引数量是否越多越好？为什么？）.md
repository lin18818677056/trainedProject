MySQL 中的索引数量是否越多越好？为什么？

# Java热门面试题200道

## 16. MySQL 中的索引数量是否越多越好？为什么？

不是，MySQL中的索引数量并非越多越好。虽然索引能够显著提升查询速度，但过度索引会带来一系列问题。

**索引的优势：**

*   **提高查询速度**：通过B-Tree等数据结构，索引能够快速定位到数据行，避免全表扫描。
*   **保证数据唯一性**：唯一索引可以确保表中某列的数值是唯一的。
*   **加速表连接**：在进行表连接（JOIN）时，对连接字段建立索引可以显著提高查询效率。
*   **优化排序和分组**：当排序或分组的字段是索引时，可以利用索引的有序性，避免额外的排序操作。

**索引的劣势：**

*   **占用存储空间**：索引本身也是一张表，需要消耗额外的磁盘空间。索引越多，占用的空间就越大。
*   **降低写操作性能**：当对表中的数据进行增、删、改操作时，不仅需要更新数据表，还需要更新对应的索引。索引越多，维护成本就越高，从而降低了写操作的性能。
*   **增加查询优化器的选择难度**：当一个表有多个索引时，MySQL的查询优化器需要评估使用哪个索引效率最高。索引过多会增加优化器的选择难度，可能导致选择了错误的索引，反而降低查询性能。

**如何权衡？**

*   **为经常作为查询条件的字段建立索引**：在 `WHERE`、`JOIN`、`ORDER BY`、`GROUP BY` 中频繁使用的字段，应该考虑建立索引。
*   **选择区分度高的列作为索引**：区分度越高，索引的效率就越高。例如，性别字段就不适合作为索引，因为只有男、女两个值，区分度很低。
*   **使用复合索引**：当多个字段经常一起作为查询条件时，可以考虑建立复合索引。复合索引可以同时满足多个查询条件，提高查询效率。
*   **避免冗余索引**：如果已经有了复合索引 `(a, b)`，那么再单独为 `a` 字段建立索引就是冗余的。
*   **定期审查和优化索引**：通过 `EXPLAIN` 命令分析查询语句，找出慢查询，并根据实际情况调整索引策略。

**总结：**

索引是一把双刃剑，适度的索引可以极大地提高查询性能，但过度的索引则会带来存储和性能上的开销。因此，在实际应用中，需要根据业务场景和查询需求，权衡利弊，创建最合适的索引。
